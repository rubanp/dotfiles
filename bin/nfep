#!/bin/zsh

# Start new session
# =================
echo "Creating tmux session..."
tmux new-session -d -s $1
sleep 0.5

# First window - nvim
# ===================
echo "Building window 1 'nvim'..."
tmux rename-window -t 1 'nvim'
sleep 0.5

echo "Downloading frontend boilerplate into ~/Code/personal/$1..."
tmux send-keys -t 'nvim' "svn export https://github.com/rubanp/frontend-boilerplate.git/trunk ~/Code/personal/$1" C-m
sleep 3

echo "Changing directory into ~/Code/personal/$1..."
tmux send-keys -t 'nvim' "cd ~/Code/personal/$1" C-m
sleep 0.5

echo "Installing node modules..."
tmux send-keys -t 'nvim' "npm i" C-m
sleep 3

echo "Initialising git..."
tmux send-keys -t 'nvim' 'git init && git add *' C-m
sleep 1
tmux send-keys -t 'nvim' 'git add .gitignore .eslintrc.json' C-m
sleep 1
tmux send-keys -t 'nvim' 'git add .prettierrc.yaml .prettierignore' C-m
sleep 1

echo "Creating first git commit..."
tmux send-keys -t 'nvim' "git commit -m 'first commit'" C-m
sleep 2

echo "Initialising vim..."
tmux send-keys -t 'nvim' "vim"
sleep 0.5

echo "Window 1 'nvim' created."
sleep 0.25


# Second Window - ranger
# ======================
echo "Building window 2 'ranger'..."
tmux new-window -t $1:2 -n 'ranger'
sleep 0.5

echo "Changing directory into ~/Code/personal/$1..."
tmux send-keys -t 'ranger' "cd ~/Code/personal/$1" C-m
sleep 0.5

echo "Initialising ranger"
tmux send-keys -t 'ranger' "ranger"
sleep 1

echo "Window 2 'ranger' created."
sleep 0.25

# Third Window - git
# ==================

echo "Building window 3 'git'..."
tmux new-window -t $1:3 -n 'git'
sleep 0.5

echo "Changing directory into ~/Code/personal/$1..."
tmux send-keys -t 'git' "cd ~/Code/personal/$1" C-m
sleep 0.5

echo "Creating github repository..."
tmux send-keys -t 'git' "gh repo create" C-m
sleep 0.5
tmux send-keys -t 'git' 'push' C-m
sleep 0.5
tmux send-keys -t 'git' C-m
sleep 0.5
tmux send-keys -t 'git' C-m
sleep 0.5
tmux send-keys -t 'git' C-m
sleep 0.5

echo "Pushing to github repository..."
tmux send-keys -t 'git' C-m
sleep 1
tmux send-keys -t 'git' C-m
sleep 1
tmux send-keys -t 'git' C-m
sleep 1
tmux send-keys -t 'git' C-m
sleep 1

echo "Initialising lazygit..."
tmux send-keys -t 'git' "lazygit"
sleep 0.5

echo "Window 3 'git' created."
sleep 0.25

# # Fourth Window - zsh
# ===================
echo "Building window 4 'zsh'..."
tmux new-window -t $1:4 -n 'zsh'
sleep 0.5

echo "Changing directory into ~/Code/personal/$1..."
tmux send-keys -t 'zsh' "cd ~/Code/personal/$1" C-m
sleep 0.5
echo "Window 4 'zsh' created."
sleep 0.25

# Fifth Window - vite
# ===================
echo "Building window 4 'vite'..."
tmux new-window -t $1:5 -n 'vite'
sleep 0.5

echo "Changing directory into ~/Code/personal/$1..."
tmux send-keys -t 'vite' "cd ~/Code/personal/$1" C-m
sleep 0.5
echo "Initialising vite dev server..."
tmux send-keys -t 'vite' "npm run dev"
sleep 1

echo "Window 5 'vite' created."
sleep 0.25

# Attach to zsh window
# ==============================
echo "Attaching to session $1..."
sleep 1
tmux attach-session -t $1
